# ECMAScript6 기초 정리

BSIDESOFT 스터디에서 ES6를 주로 사용한다. 이전 버전과 많은 부분이 달라져서 어차피 올 흐름이기도 하고 제대로 공부해보기로 했다. 그러다가 ES6를 깊게 파보는 연구스터디가 있어서 참여했다. 아직 너무도 아는게 없는 초보지만 최대한 폐가 되지 않게 열심히 따라가보려 한다. 우선은 기초 정리다.

## 0. 기본

- 엔진이 업그레이드 되었다. 하지만 아직 옛날 코드들이 대부분이니 어쩔 수 없이 ES5 엔진을 포함한 superset이 되었다. ES5의 것들 중 삭제된 것은 아무것도 없다.

## 1. let

- scope
    + `var`는 안쓰는게 좋다. 만약 쓴다면 ES5 에뮬레이터가 실행되기 때문에 ES6를 제대로 사용하고싶다면 `let`을 쓰자.
    + `var`는 함수 스코프 변수라서 오직 function의 블록 내에서만 지역변수처럼 작동한다. 즉 if, for, while 등의 `{ }` 블록 안에서 선언하면 블록 바깥에서도 사용 가능하다.
    + `let`은 모든 블락에서 지역변수처럼 작용하게 한다. 즉 함수 스코프 변수가 아니라 블록 스코프 변수다. if의 블락에서도 내에서 선언하면 조건절이 끝났을 때 변수는 사라진다.
- declaration
    + `var`는 재선언하면 덮어쓴다. 즉 `var a = 1`을 한 후에 또 다시 `var a = 10` 이런식으로 호출할 수 있다. 에러 안난다.
    + `let`은 위처럼 못쓴다. 덮어쓰려고 하면 TypeError 발생한다. `let a = 1`을 한 후엔 앞에 let을 빼고 `a = 10` 이런 식으로만 가능하다.

## 2. const

- 예전엔 상수 개념이 없었다. 그냥 변수 이름을 const_something 같이 표시해주는 정도였고 실제 상수 기능은 없었다. ES6부터 `const` 키워드로 상수 선언 가능해졌다.
- 역시 let처럼 block scope로 작동한다.
- 변수에 객체를 할당한다는 의미는 객체의 참조값을 변수가 가진다는 의미다. 즉 const를 쓰면 그 참조값이 고정된다. 변수가 가지는 참조값은 변할 수 없지만 참조값의 객체는 변할 수 있다.

## 3. parameter default value

- ES5에서는 기본값 지정할 수 있는 기능이 따로 없었다. 그래서 매개변수의 기본값을 지정하려면 함수 내부에서 '만약 매개변수가 undefined라면 특정 값을 대입'하는 코드가 들어갔다. ES6에선 다른 언어들과 마찬가지로 함수를 선언할 때 `func(a=1, b=2)` 처럼 기본값을 지정할 수 있다.
- 만약 방금 전 코드에서 `func(10)`처럼 하나만 지정해주면 첫 번째 매개변수 a에 10이 들어간다. b는 디폴트값인 2가 들어간다. 만약 a는 디폴트값으로 주고 b에만 값을 지정해주고싶으면 `func(undefined, 20)`같이 undefined를 이용한다. 그런데 이런식으로 `func(b=20)` 매개변수를 특정해서 값을 넣을 수는 없다. 이럴 땐 b 값으로 들어가는게 아니라 a에 20이 들어가는 거고, b라는 전역변수가 생긴다. 함수 스코프 변수도 아니고 블록 스코프 변수도 아닌 전역변수다.
- 함수를 선언할 때 매개변수에 표현식을 넣을 수도 있다.

## 4. `...` spread operator(펼침 연산자)

- 매개변수로 넣을 때 활용: iterable 앞에 붙어서 속한 원소들을 풀어놓는다. 어떤 함수의 매개변수가 array를 받는게 아니라 개별 값을 받는 형태라면 예전엔 apply를 썼어야했다. 이젠 매개변수에 `...my_arr`을 넣어주면 알아서 풀어헤쳐져서 매개변수로 들어간다. 내부 처리가 apply를 호출하는 형태는 아니다.
- 배열 연결 및 추가: 펼침 연산자를 통해서 배열을 연결할 수 있다. 배열 내에 펼침연산자를 쓴 배열을 원소처럼 넣으면 자연스럽게 원소들이 쭉 나열된다. 아래처럼 깔끔하게 연결이 가능하다.

    ```js
    let arr1 = [1];
    let arr2 = [2, 3, 4];
    // Array.prototype.push.apply(arr1, arr2); // 예전 코드
    arr1.push(...arr2);
    ```

- 당연하게도 펼침 연산자가 적용된 배열을 `,`로 여러개 연결시킬 수도 있다.

## 5. `...` rest parameter

- spread operator와 형태는 같지만 다르다. 함수를 선언할 때 매개변수로 몇 개 값을 받을지 모를 때 `...`을 쓴다. 즉 가변적인 함수 인자일 때 사용한다.
- 매개변수 앞에 `...`을 붙이면 되고, 붙여진 매개변수는 무조건 맨 마지막에 써야하고, 한 함수 당 한 번만 쓰일 수 있다.
- 예전엔 매개변수로 들어온 모든 값을 갖고 있는 `arguments` 객체를 썼다. 이젠 `...`을 붙인 매개변수, 즉 배열 객체를 사용하면 된다.
